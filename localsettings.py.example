#!/usr/bin/env python
# -*- coding: UTF-8 -*-

APP_ROOT = "/webapps/cf_transcription"
PYLIBS_DIR = APP_ROOT + "/libs/python"

CONVERSATION_DIR = APP_ROOT + "/data/conversations"
LISTS_DIR = APP_ROOT + "/data/lists"
SESSION_FNAME = 'session-fixed.xml'
SESSION_FNAMES = ('session-fixed.xml', 'session.xml')
# alternatives, tried from the first (up to the last if the previous did not
# exist)

WORKLOGS_DIR = APP_ROOT + "/log/work_logs"
CURLLOGS_DIR = APP_ROOT + "/log/curl_logs"
LOG_CURL = False

CODE_LENGTH = 6  # length of the validation code
CODE_LENGTH_EXT = 3  # length of the validation code extension

CF_KEY = "abcdabcdabcdabcdabcdabcdabcdabcdabcdabcd"
# CF_JOB_ID = "123456"
CF_JOB_IDS = {0.05: '123457',
              0.10: '123458',
              0.15: '123459',
              0.20: '123460',
              0.25: '123461',
              0.30: '123462',
              0.35: '123463',
              0.40: '123464'}

PRICE_CONST = 2 * 0.01
PRICE_PER_MIN = 30 * 0.01
PRICE_PER_TURN = 0.5 * 0.01
CF_MIN_TURNS = 2

# maximum tolerated character error rate in transcriptions (after
# normalisation)
#
# The value 0.07 implies that one in 14--15 characters being wrong shall be
# tolerated.
MAX_CHAR_ER = 0.07

XML_COMMON = {
    'ANNOTATIONS_ABOVE': ".",
    'ANNOTATIONS_AFTER': "turn",  # This has to point to a direct child of
                                  # ANNOTATIONS_ABOVE.
    'ANNOTATIONS_ELEM': "annotations",
    'ANNOTATION_ELEM': "annotation",
    'REC_SUBPATH': "rec",
    'REC_FNAME_ATTR': "fname"
}

XML_SCHEMES = {
    'dialog': {
        'USERTURN_PATH': ".//userturn",
        'SYSTURN_PATH': ".//systurn",
        'TURNNUMBER_ATTR': "turnnum",
        'SYSTEXT_SUBPATH': "prompt",
        'TRANSCRIPTIONS_BEFORE': "asr",
        'TRANSCRIPTIONS_ELEM': "transcriptions",
        'TRANSCRIPTION_BEFORE': None,
        'TRANSCRIPTION_ELEM': "transcription",
        'AUTHOR_ATTR': "author",
        'DATE_ATTR': "date_updated",
        'DATE_FORMAT': None
    },
    'dialogue': {
        'USERTURN_PATH': ".//turn[@speaker='user']",
        'SYSTURN_PATH': ".//turn[@speaker='system']",
        'TURNNUMBER_ATTR': "turn_number",
        'SYSTEXT_SUBPATH': "text",
        'TRANSCRIPTIONS_BEFORE': None,
        'TRANSCRIPTIONS_ELEM': None,
        'TRANSCRIPTION_BEFORE': "slu",
        'TRANSCRIPTION_ELEM': "asr_transcription",
        'AUTHOR_ATTR': "transcriber",
        'DATE_ATTR': "date",
# NOTE: including timezone info into the datetime format could disable
# finding the transcription in its XML if the timezone setting changes
        'DATE_FORMAT': "%d/%m/%y, %H:%M:%S %Z"
    }
}
